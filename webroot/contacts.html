<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Contacts - Contact Manager</title>
    <link rel="stylesheet" href="../css/fonts.css" />
    <link rel="stylesheet" href="../css/skeleton.css">
    <link rel="stylesheet" href="../css/contactDetails.css">
    <link rel="stylesheet" href="../css/contacts.css">
    <link rel="stylesheet" href="../css/search.css">
    <link rel="stylesheet" href="../css/styles.css">
    <script src="../js/skeleton.js" defer></script>
    <script type="module" src="js/main.js"></script>
</head>

<body>
    <div class="container">
        <div id="headerDiv">
            <h1>My Contacts</h1>
            <div id="userInfo">
                Logged in as: <span id="userName"></span>
                <button id="logoutButton" onclick="doLogout()">Logout</button>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="tab-container">
            <div class="tab-buttons">
                <button class="tab-button active" onclick="switchTab('contacts')">Contact List</button>
                <button class="tab-button" onclick="switchTab('add')">Add Contact</button>
            </div>
        </div>
        <!-- Contact List Tab -->
        <div id="contactsTab" class="tab-content active">
            <!-- Side-by-side container -->
            <div class="contacts-container">
                <!-- Left Panel - Contact List -->
                <div class="contacts-left-panel">
                    <!-- Search Bar -->
                    <div id="searchDiv">
                        <div class="search-input-container">
                            <input type="text" id="searchText" placeholder="Search contacts...">
                            <button id="searchButton" onclick="searchContacts()">Search</button>
                        </div>
                        <span id="searchResult"></span>
                    </div>

                    <!-- Contacts List -->
                    <div id="contactsDiv">
                        <table id="contactsTable">
                            <thead>
                                <tr>
                                    <th>First Name</th>
                                    <th>Last Name</th>
                                </tr>
                            </thead>
                            <tbody id="contactsList">
                                <!-- Contacts will be loaded here by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Right Panel - Contact Details -->
                <div class="contacts-right-panel">
                    <div class="details-header">
                        Contact Details
                    </div>
                    <!-- Contacts Details card -->
                    <div id="contactDetailsDiv">
                        <div class="no-contact-selected">
                            Select a contact from the list to view details
                        </div>
                        <table id="contactDetails" style="display: none;">
                            <thead>
                                <tr>
                                </tr>
                            </thead>
                            <tbody id="contactDetails">
                                <!-- Contact details will be loaded here by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>


            <!-- Edit Contact Section (Initially Hidden) -->
            <div id="editContactDiv" style="display: none;">
                <h2>Edit Contact</h2>
                <div id="editContactResult" class="result-message"></div>

                <form id="editContactForm">
                    <input type="hidden" id="editContactID">

                    <div class="form-group">
                        <label for="editFirstName">First Name:</label>
                        <input type="text" id="editFirstName" required>
                    </div>

                    <div class="form-group">
                        <label for="editLastName">Last Name:</label>
                        <input type="text" id="editLastName" required>
                    </div>

                    <div class="form-group">
                        <label for="editEmail">Email:</label>
                        <input type="email" id="editEmail" required>
                    </div>

                    <div class="form-group">
                        <label for="editPhone">Phone:</label>
                        <input type="text" id="editPhone" required>
                    </div>

                    <div class="form-group">
                        <label for="editAddress">Address:</label>
                        <input type="text" id="editAddress">
                    </div>

                    <button type="button" id="updateContactButton" onclick="updateContact()">Update Contact</button>
                    <button type="button" id="cancelEditButton" onclick="cancelEdit()">Cancel</button>
                </form>
            </div>
        </div>

        <!-- Add Contact Tab -->
        <div id="addTab" class="tab-content">
            <h2 class="add-contact-heading">Add New Contact</h2>
            <div id="addContactResult" class="result-message"></div>

            <form id="addContactForm">
                <div class="form-group">
                    <label for="contactFirstName">First Name:</label>
                    <input type="text" id="contactFirstName" required>
                </div>

                <div class="form-group">
                    <label for="contactLastName">Last Name:</label>
                    <input type="text" id="contactLastName" required>
                </div>

                <div class="form-group">
                    <label for="contactEmail">Email:</label>
                    <input type="email" id="contactEmail" required>
                </div>

                <div class="form-group">
                    <label for="contactPhone">Phone:</label>
                    <input type="text" id="contactPhone" required>
                </div>

                <div class="form-group">
                    <label for="contactAddress">Address:</label>
                    <input type="text" id="contactAddress">
                </div>

                <button type="button" id="addContactButton" onclick="addContact()">Add Contact</button>
            </form>
        </div>
    </div>

    <script>
        // Tab switching functionality
        function switchTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(tab => tab.classList.remove('active'));

            // Remove active class from all tab buttons
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => button.classList.remove('active'));

            // Show selected tab content
            if (tabName === 'contacts') {
                document.getElementById('contactsTab').classList.add('active');
                document.querySelector('.tab-button:first-child').classList.add('active');
            } else if (tabName === 'add') {
                document.getElementById('addTab').classList.add('active');
                document.querySelector('.tab-button:last-child').classList.add('active');
            }
        }
    </script>
</body>

</html>